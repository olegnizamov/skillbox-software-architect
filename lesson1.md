#### 1.7 Практическая работа

# Решение:

Какие плюсы и минусы у REST?


| Плюсы                                                                                                                                                                                                                                                                        | Минусы                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          |
| --------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| Гибкость. Кроме того, эта архитектура весьма гибкая и дает возможность обрабатывать различные типы запросов и форматы данных.                                           | Браузеры поддерживают не все коды ответа.Например, большинство браузеров имеют ограниченную поддержку PUT и DELETE.                                                                                                                                                                                                                                                                                                                        |
| Масштабируемость. Так как архитектура REST разделяет клиент и сервер, ее легко расширять, что позволяет масштабировать приложение без особых проблем. | Тяжелый механизм дебагинга. Код ответа может быть 200 ок, а в теле ошибки сообщаться ошибка.                                                                                                                                                                                                                                                                                                                                                                  |
| Выполнение запросов синхронно, т.е известна очередность                                                                                                                                                                           | Необходимо подробно описывать коды ответа, т.к коды ответов HTTP достаточно расплывчаты                                                                                                                                                                                                                                                                                                                                                                        |
| -                                                                                                                                                                                                                                                                                 | В теле ответа может содержаться ненужная пользователю информация. К примеру нужны данные уникальный ключ, значение которое весит 100байт, а отдается ответ на 500кб                                                                                                                                                                                                                              |
| -                                                                                                                                                                                                                                                                                 | Недостаточная выборка. Возможна и обратная ситуация, когда клиенту приходится делать несколько запросов, чтобы получить всю информацию, которая ему нужна. Например, из одной конечной точки API вы получаете личные данные пользователя, а из другой – информацию о сделанных им заказах. |
| -                                                                                                                                                                                                                                                                                 | Выполнение запросов синхронно, т.е последовательно                                                                                                                                                                                                                                                                                                                                                                                                                                        |
| -                                                                                                                                                                                                                                                                                 | При сбое(исключительной ситуации) последнего элемента в стеке вызова будет откат с ошибкой(каскадно).                                                                                                                                                                                                                                                                                                                                            |

Какие плюсы и минусы у Messaging?


| Плюсы                                                     | Минусы                                             |
|-----------------------------------------------------------|----------------------------------------------------|
| Отделение логически независимых компонентов друг от друга | Узкое место системы                                |
| Улучшение масштабируемости                                | Доп. специалисты, кто будет это поддерживать       |
| Балансировка нагрузки                                     | Сложнее поддерживать, чем rest                     |
| Повышение надежности (Гарантированная доставка)           | Необходимо продумывать механизм доставки сообщений |
| Безопасность                                              | -                                                 |
| Фоновая обработка                                         | -                                                 |

Какие факторы должны учитываться при принятии решения? *(необязательный вопрос, ответьте по желанию)

1. Нет специалистов, которые будут поддерживать Messaging (kafka, rabbitmq) - тогда REST
2. Нет ресурсов, для поддерживания инфраструктуры (kafka, rabbitmq) - тогда REST
3. Нет денег, для поддерживания инфраструктуры (kafka, rabbitmq) - тогда REST
4. Брокер сообщений является узким местом - на нем должно быть настроено много логгирования и мониторинга, если этого нет - REST
5. Если нет развития приложения и в будущем оно не планируется - REST
6. Если приложение - крупный монолит и его дробить на микросервисы не планируется - REST

Какие плюсы и минусы у общей БД?


| Плюсы                                                          | Минусы                                                                                                    |
|----------------------------------------------------------------|-----------------------------------------------------------------------------------------------------------|
| Простота поддержки  - меньше людей                             | Производительность                                                                                        |
| Проще обновление - необходимо поддерживать одну сущность       | Сложнее производить рефакторинг - добавление(обновление) полей таблицы может повлиять на логику в системах |
| Простота поддержки - нет необходимости синхронизировать данные | Усложнение дизайна системы, разграничение прав доступа к таблицам                                         |
| Стоимость лицензии меньше                                      | Падение базы данных - ломает все приложение                                                                                                          |

Какие плюсы и минусы у раздельных БД?


| Плюсы                                                                                              | Минусы                                      |
|----------------------------------------------------------------------------------------------------|---------------------------------------------|
| Падение базы данных - НЕ ломает все приложение                                                     | Нужно больше ресурсов и людей для поддержки |
| Проще производить рефакторинг - добавление(обновление) полей таблицы не повлияет на логику в системах | Синхронизация данных                        |
| Простота дизайн системы                                                                            | Больше резервирования и накладных расходов  |
| Легче поддержка                                                                                    | Стоимость лицензирования больше             |


Какие факторы должны учитываться при принятии решения? *(необязательный вопрос, ответьте по желанию)

* Нет зависимых данных в 2 сущностях (базы данных не зависят друг от друга) - Раздельная
* Если система проработана в плане хранения данных - Раздельная
* Важна производительность - Раздельная
* 

**Цель домашнего задания**

* Научиться определять критерии, которые могут повлиять на архитектурное решение.
* Проанализировать предложенные решения и описать компромиссы между ними.

**Что входит в задание**

1. Продумать интеграцию между сервисами, сравнить подходы REST и Messaging.
2. Выбрать способ хранения данных и сравнить подходы к выбору БД.

**Задача 1. REST vs Messaging**

**Что нужно сделать**

Вы проектируете систему интернет-магазина, в котором есть два приложения, Order Service и Delivery Service:

* Order Service отвечает за принятие заказов у клиента;
* Delivery Service рассчитывает дату доставки товара в зависимости от загрузки курьерской службы.

Текущая архитектура отражена на диаграмме:

![](https://go.skillbox.ru/media/files/share/image3.png)

1. Продумайте интеграцию между Order Service и Delivery Service. Сравните два подхода к интеграции — REST, синхронный
   подход к интеграции, и Messaging, при котором запросы отправляются асинхронно.
2. Ответьте на вопросы:
3. Какие плюсы и минусы у REST?
4. Какие плюсы и минусы у Messaging?
5. Какие факторы должны учитываться при принятии решения? *(необязательный вопрос, ответьте по желанию)

**Задача 2. Database**

**Что нужно сделать**

Вы определились с интеграцией между сервисами. Теперь вам нужно решить, как будут храниться данные.

1. Выберите один из способов хранения данных:

* общую базу данных (БД) для этих сервисов:

![](https://go.skillbox.ru/media/files/share/image1_4Eq0wIF.png)

* отдельные базы данных для каждого сервиса:

![](https://go.skillbox.ru/media/files/share/image2_N7p5lMf.png)

2. Проанализируйте компромиссы в предложенных решениях, оцените преимущества и недостатки каждого подхода и ответьте на
   вопросы:
3. Какие плюсы и минусы у общей БД?
4. Какие плюсы и минусы у раздельных БД?
5. Какие факторы должны учитываться при принятии решения? *(необязательный вопрос, ответьте по желанию)

**Советы и рекомендации**

* Задачи подразумевают самостоятельный анализ. С помощью интернета изучите подходы и выявите преимущества и недостатки
  каждой подхода.
* При анализе плюсов и минусов изучите каждый подход сначала с технической точки зрения, а потом подумайте, как
  выбранные подходы отразятся на дальнейшем развитии системы.
* Вместе с каждым преимуществом и недостатком опишите, в чём именно они заключаются.

**Критерии оценки**

**«Зачёт»** : проведён сравнительный анализ предложенных решений, получены ответы на вопросы 1–2 в каждом задании.

**«На доработку»** : выполнены не все обязательные пункты задания или нет обоснования выбора хотя бы по одному из
обязательных пунктов.

**Как отправить задание на проверку**

Оформите сравнительный анализ по примеру таблицы. Если ответите на вопросы со звёздочкой, оформите решение в виде списка
с указанием критериев выбора.

![](https://go.skillbox.ru/media/files/share/2512.png)

Цель домашнего задания**

* Научиться определять критерии, которые могут повлиять на архитектурное решение.
* Проанализировать предложенные решения и описать компромиссы между ними.

**Что входит в задание**

1. Продумать интеграцию между сервисами, сравнить подходы REST и Messaging.
2. Выбрать способ хранения данных и сравнить подходы к выбору БД.

**Задача 1. REST vs Messaging**

**Что нужно сделать**

Вы проектируете систему интернет-магазина, в котором есть два приложения, Order Service и Delivery Service:

* Order Service отвечает за принятие заказов у клиента;
* Delivery Service рассчитывает дату доставки товара в зависимости от загрузки курьерской службы.

Текущая архитектура отражена на диаграмме:

![](https://go.skillbox.ru/media/files/share/image3.png)

1. Продумайте интеграцию между Order Service и Delivery Service. Сравните два подхода к интеграции — REST, синхронный
   подход к интеграции, и Messaging, при котором запросы отправляются асинхронно.
2. Ответьте на вопросы:
3. Какие плюсы и минусы у REST?
4. Какие плюсы и минусы у Messaging?
5. Какие факторы должны учитываться при принятии решения? *(необязательный вопрос, ответьте по желанию)

**Задача 2. Database**

**Что нужно сделать**

Вы определились с интеграцией между сервисами. Теперь вам нужно решить, как будут храниться данные.

1. Выберите один из способов хранения данных:

* общую базу данных (БД) для этих сервисов:

![](https://go.skillbox.ru/media/files/share/image1_4Eq0wIF.png)

* отдельные базы данных для каждого сервиса:

![](https://go.skillbox.ru/media/files/share/image2_N7p5lMf.png)

2. Проанализируйте компромиссы в предложенных решениях, оцените преимущества и недостатки каждого подхода и ответьте на
   вопросы:
3. Какие плюсы и минусы у общей БД?
4. Какие плюсы и минусы у раздельных БД?
5. Какие факторы должны учитываться при принятии решения? *(необязательный вопрос, ответьте по желанию)

**Советы и рекомендации**

* Задачи подразумевают самостоятельный анализ. С помощью интернета изучите подходы и выявите преимущества и недостатки
  каждой подхода.
* При анализе плюсов и минусов изучите каждый подход сначала с технической точки зрения, а потом подумайте, как
  выбранные подходы отразятся на дальнейшем развитии системы.
* Вместе с каждым преимуществом и недостатком опишите, в чём именно они заключаются.

**Критерии оценки**

**«Зачёт»** : проведён сравнительный анализ предложенных решений, получены ответы на вопросы 1–2 в каждом задании.

**«На доработку»** : выполнены не все обязательные пункты задания или нет обоснования выбора хотя бы по одному из
обязательных пунктов.

**Как отправить задание на проверку**

Оформите сравнительный анализ по примеру таблицы. Если ответите на вопросы со звёздочкой, оформите решение в виде списка
с указанием критериев выбора.

![](https://go.skillbox.ru/media/files/share/2512.png)
